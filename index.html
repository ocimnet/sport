<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live Scores Scraper</title>
<style>
    body { font-family: Arial; background: #111; color: #eee; padding: 20px; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 10px; border: 1px solid #444; text-align: center; }
    th { background: #222; }
    .loading { font-size: 20px; }
</style>
</head>
<body>

<h2>Live Scores Sepakbola (Scraping Tanpa API)</h2>
<div id="status" class="loading">Mengambil data...</div>

<table id="scoresTable" style="display:none;">
    <thead>
        <tr>
            <th>Waktu</th>
            <th>Home</th>
            <th>Skor</th>
            <th>Away</th>
        </tr>
    </thead>
    <tbody id="scoresBody"></tbody>
</table>

<script>
const CORS_PROXY = "https://api.allorigins.win/raw?url=";
const TARGET_URL = "https://www.livescore.com/en/football/live/";

async function loadScores() {
    document.getElementById("status").innerText = "Mengambil data...";

    try {
        const response = await fetch(CORS_PROXY + encodeURIComponent(TARGET_URL));
        const html = await response.text();

        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");

        let matches = doc.querySelectorAll("div.Kl1BU"); // selector live score

        const tbody = document.getElementById("scoresBody");
        tbody.innerHTML = "";

        matches.forEach(match => {
            const time = match.querySelector(".uXC01")?.textContent.trim() || "-";
            const home = match.querySelector(".FdJZw")?.textContent.trim() || "-";
            const away = match.querySelector(".xrP4i")?.textContent.trim() || "-";
            const score = match.querySelector(".qo8Vx")?.textContent.trim() || "-";

            let row = `
                <tr>
                    <td>${time}</td>
                    <td>${home}</td>
                    <td>${score}</td>
                    <td>${away}</td>
                </tr>
            `;
            tbody.innerHTML += row;
        });

        document.getElementById("scoresTable").style.display = "table";
        document.getElementById("status").innerText = "Terakhir diperbarui: " + new Date().toLocaleTimeString();

    } catch (err) {
        document.getElementById("status").innerText = "Gagal memuat data.";
        console.error(err);
    }
}

// load pertama
loadScores();

// auto-refresh tiap 30 detik
setInterval(loadScores, 30000);
</script>

</body>
</html>
